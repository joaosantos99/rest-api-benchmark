# To get started with Dependabot version updates, you'll need to specify which
# package ecosystems to update and where the package manifests are located.
# Please see the documentation for all configuration options:
# https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuration-options-for-the-dependabot.yml-file

version: 2
updates:
  # Enable version updates for Docker
  - package-ecosystem: "docker"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
      time: "09:00"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "docker"
      include: "scope"

  # Node.js service dependencies
  - package-ecosystem: "npm"
    directory: "/services/node/src"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "npm"
      prefix-development: "npm-dev"
      include: "scope"

  # K6 testing dependencies
  - package-ecosystem: "npm"
    directory: "/k6"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 3
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "k6"
      include: "scope"

  # Bun service dependencies
  - package-ecosystem: "npm"
    directory: "/services/bun/src"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 3
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "bun"
      include: "scope"

  # Rust service dependencies
  - package-ecosystem: "cargo"
    directory: "/services/rust"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "cargo"
      include: "scope"
    groups:
      rust-dependencies:
        patterns:
          - "*"

  # Go service dependencies
  - package-ecosystem: "gomod"
    directory: "/services/golang/src"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "go"
      include: "scope"

  # Java 17 service dependencies
  - package-ecosystem: "maven"
    directory: "/services/java17"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "maven-j17"
      include: "scope"

  # Java 21 service dependencies  
  - package-ecosystem: "maven"
    directory: "/services/java21"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "maven-j21"
      include: "scope"

  # Python service dependencies
  - package-ecosystem: "pip"
    directory: "/services/python/src"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "pip"
      include: "scope"

  # Scala service dependencies
  - package-ecosystem: "gradle"
    directory: "/services/scala"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "scala"
      include: "scope"

  # Elixir service dependencies
  - package-ecosystem: "mix"
    directory: "/services/elixir"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 5
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "mix"
      include: "scope"

  # Perl service dependencies
  - package-ecosystem: "bundler"
    directory: "/services/perl/src"
    schedule:
      interval: "monthly"
    open-pull-requests-limit: 3
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "perl"
      include: "scope"

  # GitHub Actions workflows
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"
      day: "monday"
    open-pull-requests-limit: 3
    reviewers:
      - "maintainer-username"
    commit-message:
      prefix: "actions"
      include: "scope"

# Global ignore conditions
# Ignore specific packages or versions that may cause issues
# with the benchmark environment
ignore:
  # Ignore major Node.js version updates that might break compatibility
  - dependency-name: "node"
    versions: [">= 22.a"]
  
  # Ignore specific package updates that might affect performance
  - dependency-name: "axios"
    versions: [">= 2.a"]
    
  # Ignore Rust unstable versions
  - dependency-name: "tokio"
    versions: [">= 2.a"]
    
  # Ignore Java major version updates
  - dependency-name: "openjdk"
    versions: [">= 22.a"]
